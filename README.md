# Бот для обратной связи
## Команды
1. /menu -- главное меню
2. /help -- помощь
3. /start -- начало разговора
## Общие замечания про интерфейс
* Иногда на клавиатуре не влезают все кнопки на экран. Клавиатуру __можно__ скоролить, чтобы увидеть все.
* В разных местах будет показываться похожая клавиатура для выбора объектов из списка. __Стрелочки означают переход
на следующую страницу__.
* В любой момент после регистрации Вы можете использовать /menu, чтобы __сразу__ перейти в меню.

В работе...
## Функции 
### Профиль (доступно всем)
Здесь можно узнать информацию о себе, сменить никнейм и группу. Можно удалить профиль.
### Курсы (доступно всем)
Здесь можно записаться на курс, если ваша группа не записана на него или отписаться. Если модератор добавил Вашей группе
некоторый курс, Вы уже будете записаны на него (см. Группы). 
### Отзывы (доступно всем)
Здесь можно написать отзыв (в том числе анонимно), проголосовать за него (пока плохо реализовано, 
можно голосовать любое количество раз :) ),
удалить его и применять различные фильтры. Модератор (админ) может также одобрить отзыв
(он станет виден другим) или удалить ранее одобренный отзыв.
#### Создание отзыва:
1. Выбирается __уникальный__ заголовок. _Существует ограничение на количество символов_.
2. Выбирается событие из списка курсов, на которые вы __записаны__ (__модератор должен добавить Ваш предмет заранее__), 
   если вы хотите написать про конкретный предмет. Это _опционально_.
3. Выбирается учитель (__модератор должен добавить Вашего преподавателя заранее__), 
   если вы хотите написать про конкретный предмет. Это _опционально_.
4. Нужно набрать текст отзыва
5. Выбрать, _анонимный_ отзыв или нет. Бот __будет__ знать, кто написал анонимный отзыв, но не будет показывать это
модераторам и обычным пользователям. В самой базе данных запись __будет__.
   
__Внимание!__ Только что написанный отзыв должен быть __одобрен__ модератором, чтобы тот был опубликован.
#### Фильтры (в следующих обновлениях фильтров прибавится)
* Изначально Вы видите одобренные модератором отзывы, в начале новые.
* Показать мои отзывы -- показывает все ваши отзывы, _как модерированные, так и нет_.
* Убрать фильтры -- возвращает вид по умолчанию.
* Показать немодерированные отзывы (для модераторов) -- показывает отзывы, которые пока не были одобрены.

__Внимание!__ Из-за особенностей архитектуры после одобрения отзыва он __не__ показывается __модератору__
мгновенно как одобренный. Все остальные пользователи, однако, с этого момента __видят__ этот отзыв.
### Группы (доступно модераторам и админу)
Можно редактировать имя группы, почту, контакты старосты. Можно создать новую группу, удалить (__имеет последствия__)
старую. Также можно управлять списком событий, на которые записана вся группа. 
Например, 101 группа, вероятно, будет подписана на матанализ, то есть все студенты, указавшие эту группу, будут видеть
матанализ как один из курсов.

__Последствия удаления группы:__ Удалятся (!) профили всех (!) студентов группы, отзывы (!) студентов группы.
### События (доступно модераторам и админу)
Можно создавать, удалять (__имеет последствия__) события, редактировать их свойства.
__Для создания события нужно создать преподавателя, который будет его вести__ (см. Учителя).

__Последствия удаления события:__ Удалятся отзывы(!) на событие.
### Учителя (доступно модераторам и админу)
Создание, редактирование, удаление (__имеет последствия__) преподавателей.

__Последствия удаления учителя:__ Удалятся все (!) события, которые ведет данный учитель.
### Модераторы (доступно админу)
Можно добавлять новых модераторов и разжаловать старых.
### Помощь (доступно всем)
Список команд.

## Запуск
### Запуск локально:
Создадим виртуальную среду:
```
$ python3 -m venv
```
Перейдем в нее:
```
$ source ./venv/bin/activate
```
Установим зависимости:
```
$ pip3 install -r requirements.txt
```
Настроим переменные окружения:
```
$ export API_TOKEN=[ваш токен]; export ADMIN_TELEGRAM=[ваш контакт]; export ADMIN_ID=[ваш телеграм id]
```
Запуск:
```
$ python3 main.py 
```
Выйдем из окружения (опционально)
```
$ deactivate
```
### Запуск инстанса heroku
В работе...